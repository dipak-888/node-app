{"version":3,"sources":["../../server/controller/MovieController.js"],"names":["mongoose","require","Movie","getMovies","req","res","query","find","exec","err","movies","send","status","json","postMovie","newMovie","body","save","movie","message","getMovie","findById","params","id","deleteMovie","remove","_id","result","updateMovie","Object","assign","module","exports"],"mappings":";;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,QAAQD,QAAQ,kBAAR,CAAZ;;AAEA;;;AAGA,SAASE,SAAT,CAAmBC,GAAnB,EAAwBC,GAAxB,EAA6B;AACzB;AACA,QAAIC,QAAQJ,MAAMK,IAAN,CAAW,EAAX,CAAZ;AACAD,UAAME,IAAN,CAAW,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACxB,YAAGD,GAAH,EAAQJ,IAAIM,IAAJ,CAASF,GAAT;AACR;AACAJ,YAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,MAArB;AACH,KAJD;AAKH;;AAED;;;AAGA,SAASI,SAAT,CAAmBV,GAAnB,EAAwBC,GAAxB,EAA6B;AACzB;AACA,QAAIU,WAAW,IAAIb,KAAJ,CAAUE,IAAIY,IAAd,CAAf;;AAEA;AACAD,aAASE,IAAT,CAAc,UAACR,GAAD,EAAKS,KAAL,EAAe;AACzB,YAAGT,GAAH,EAAQ;AACJJ,gBAAIM,IAAJ,CAASF,GAAT;AACH,SAFD,MAGK;AAAE;AACHJ,gBAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACM,SAAS,2BAAV,EAAuCD,YAAvC,EAArB;AACH;AACJ,KAPD;AAQH;;AAED;;;AAGA,SAASE,QAAT,CAAkBhB,GAAlB,EAAuBC,GAAvB,EAA4B;AACxBH,UAAMmB,QAAN,CAAejB,IAAIkB,MAAJ,CAAWC,EAA1B,EAA8B,UAACd,GAAD,EAAMS,KAAN,EAAgB;AAC1C,YAAGT,GAAH,EAAQJ,IAAIM,IAAJ,CAASF,GAAT;AACR;AACAJ,YAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBK,KAArB;AACH,KAJD;AAKH;;AAED;;;AAGA,SAASM,WAAT,CAAqBpB,GAArB,EAA0BC,GAA1B,EAA+B;AAC3BH,UAAMuB,MAAN,CAAa,EAACC,KAAMtB,IAAIkB,MAAJ,CAAWC,EAAlB,EAAb,EAAoC,UAACd,GAAD,EAAMkB,MAAN,EAAiB;AACjDtB,YAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEM,SAAS,6BAAX,EAA0CQ,cAA1C,EAArB;AACH,KAFD;AAGH;;AAED;;;AAGA,SAASC,WAAT,CAAqBxB,GAArB,EAA0BC,GAA1B,EAA+B;AAC3BH,UAAMmB,QAAN,CAAe,EAACK,KAAKtB,IAAIkB,MAAJ,CAAWC,EAAjB,EAAf,EAAqC,UAACd,GAAD,EAAMS,KAAN,EAAgB;AACjD,YAAGT,GAAH,EAAQJ,IAAIM,IAAJ,CAASF,GAAT;AACRoB,eAAOC,MAAP,CAAcZ,KAAd,EAAqBd,IAAIY,IAAzB,EAA+BC,IAA/B,CAAoC,UAACR,GAAD,EAAMS,KAAN,EAAgB;AAChD,gBAAGT,GAAH,EAAQJ,IAAIM,IAAJ,CAASF,GAAT;AACRJ,gBAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEM,SAAS,gBAAX,EAA6BD,YAA7B,EAArB;AACH,SAHD;AAIH,KAND;AAOH;;AAED;AACAa,OAAOC,OAAP,GAAiB,EAAE7B,oBAAF,EAAaW,oBAAb,EAAwBM,kBAAxB,EAAkCI,wBAAlC,EAA+CI,wBAA/C,EAAjB","file":"MovieController.js","sourcesContent":["let mongoose = require('mongoose');\nlet Movie = require('./../model/movie');\n\n/*\n * GET /movie route to retrieve all the movies.\n */\nfunction getMovies(req, res) {\n    //Query the DB and if no errors, send all the movies\n    let query = Movie.find({});\n    query.exec((err, movies) => {\n        if(err) res.send(err);\n        //If no errors, send them back to the client\n        res.status(200).json(movies);\n    });\n}\n\n/*\n * POST /movie to save a new movie.\n */\nfunction postMovie(req, res) {\n    //Creates a new movie\n    var newMovie = new Movie(req.body);\n   \n    //Save it into the DB.\n    newMovie.save((err,movie) => {\n        if(err) {\n            res.send(err);\n        }\n        else { //If no errors, send it back to the client\n            res.status(200).json({message: \"Movie successfully added!\", movie });\n        }\n    });\n}\n\n/*\n * GET /movie/:id route to retrieve a movie given its id.\n */\nfunction getMovie(req, res) {\n    Movie.findById(req.params.id, (err, movie) => {\n        if(err) res.send(err);\n        //If no errors, send it back to the client\n        res.status(200).json(movie);\n    });        \n}\n\n/*\n * DELETE /movie/:id to delete a movie given its id.\n */\nfunction deleteMovie(req, res) {\n    Movie.remove({_id : req.params.id}, (err, result) => {\n        res.status(200).json({ message: \"Movie successfully deleted!\", result });\n    });\n}\n\n/*\n * PUT /movie/:id to update a movie given its id\n */\nfunction updateMovie(req, res) {\n    Movie.findById({_id: req.params.id}, (err, movie) => {\n        if(err) res.send(err);\n        Object.assign(movie, req.body).save((err, movie) => {\n            if(err) res.send(err);\n            res.status(200).json({ message: 'Movie updated!', movie });\n        });    \n    });\n}\n\n//export all the functions\nmodule.exports = { getMovies, postMovie, getMovie, deleteMovie, updateMovie };"]}